# r0Website-server API æ–‡æ¡£

## ğŸ“‘ ç›®å½•

- [ğŸ” æ¦‚è¿°](#æ¦‚è¿°)
- [ğŸ” è®¤è¯è¯´æ˜](#è®¤è¯è¯´æ˜)
- [ğŸ‘¥ Base API](#base-apiå…¬å…±æ¥å£)
  - [ç”¨æˆ·ç®¡ç†](#ç”¨æˆ·ç®¡ç†)
  - [æ–‡ç« ç®¡ç†](#æ–‡ç« ç®¡ç†)
  - [åˆ†ç±»ç®¡ç†](#åˆ†ç±»ç®¡ç†)
  - [å›¾åºŠç®¡ç†](#å›¾åºŠç®¡ç†)
    - [å›¾é›†ç®¡ç†](#å›¾é›†ç®¡ç†)
    - [å›¾ç‰‡ç®¡ç†](#å›¾ç‰‡ç®¡ç†)
    - [å›¾ç‰‡åˆ†ç±»ç®¡ç†](#å›¾ç‰‡åˆ†ç±»ç®¡ç†)
    - [æ ‡ç­¾ç®¡ç†](#æ ‡ç­¾ç®¡ç†)
- [ğŸ”§ Admin API](#admin-apiç®¡ç†æ¥å£)
  - [ç®¡ç†å‘˜ç™»å½•](#ç®¡ç†å‘˜ç™»å½•)
  - [æ–‡ç« ç®¡ç†](#æ–‡ç« ç®¡ç†éœ€è¦jwtè®¤è¯)
  - [åˆ†ç±»ç®¡ç†](#åˆ†ç±»ç®¡ç†éœ€è¦jwtè®¤è¯)
- [ğŸ“‹ å“åº”æ ¼å¼è¯´æ˜](#å“åº”æ ¼å¼è¯´æ˜)
- [ğŸ“„ åˆ†é¡µå‚æ•°è¯´æ˜](#åˆ†é¡µå‚æ•°è¯´æ˜)
- [âŒ é”™è¯¯å¤„ç†](#é”™è¯¯å¤„ç†)
- [ğŸ”„ æ›´æ–°è®°å½•](#æ›´æ–°è®°å½•)
- [âš ï¸ æ³¨æ„äº‹é¡¹](#æ³¨æ„äº‹é¡¹)

---

## ğŸ” æ¦‚è¿°

æœ¬æ–‡æ¡£æè¿°äº† r0Website-server çš„æ‰€æœ‰ API æ¥å£ã€‚API åˆ†ä¸ºä¸¤ä¸ªä¸»è¦åˆ†ç»„ï¼š
- **Base API**ï¼šå…¬å…±æ¥å£ï¼Œæ— éœ€è®¤è¯
- **Admin API**ï¼šç®¡ç†æ¥å£ï¼Œéœ€è¦ JWT è®¤è¯

æ‰€æœ‰ API æ¥å£éƒ½ä»¥ `/api` ä¸ºå‰ç¼€ã€‚

### ä¸»è¦åŠŸèƒ½æ¨¡å—
- **ç”¨æˆ·ç®¡ç†**ï¼šç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€è®¤è¯
- **æ–‡ç« ç®¡ç†**ï¼šæ–‡ç« CRUDã€æœç´¢ã€ç‚¹èµã€åˆ†ç±»ç®¡ç†
- **å›¾åºŠç®¡ç†**ï¼šå›¾é›†ç®¡ç†ã€å›¾ç‰‡ä¸Šä¼ ã€åˆ†ç±»ç®¡ç†ã€æ ‡ç­¾ç®¡ç†
- **åˆ†ç±»ç³»ç»Ÿ**ï¼šæ”¯æŒå›¾ç‰‡åœ¨å¤šä¸ªåˆ†ç±»ä¸­çš„ä½ç½®ç®¡ç†
- **æ ‡ç­¾ç³»ç»Ÿ**ï¼šæ ‡ç­¾åŒæ­¥ã€çƒ­é—¨æ ‡ç­¾ã€æ ‡ç­¾æœç´¢

[ğŸ” è¿”å›ç›®å½•](#ç›®å½•)

---

## ğŸ” è®¤è¯è¯´æ˜

### JWT è®¤è¯
Admin API å¤§éƒ¨åˆ†æ¥å£éœ€è¦ JWT è®¤è¯ã€‚åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ ï¼š
```
Authorization: Bearer <your_jwt_token>
```

### è·å– JWT Token
é€šè¿‡ç™»å½•æ¥å£è·å– JWT tokenï¼š
- Base ç”¨æˆ·ç™»å½•ï¼š`POST /api/base/login`
- Admin ç”¨æˆ·ç™»å½•ï¼š`POST /api/admin/login`

[ğŸ” è¿”å›ç›®å½•](#ç›®å½•)

---

---

## ğŸ‘¥ Base APIï¼ˆå…¬å…±æ¥å£ï¼‰

### ç”¨æˆ·ç®¡ç†

#### ç”¨æˆ·æ³¨å†Œ
```http
POST /api/base/register
```

**è¯·æ±‚ä½“ï¼š**
```json
{
  "username": "string",    // ç”¨æˆ·å
  "password": "string",    // å¯†ç 
  "email": "string",       // é‚®ç®±
  "phone": "string"        // æ‰‹æœºå·ï¼ˆå¯é€‰ï¼‰
}
```

**å“åº”ï¼š**
```json
{
  "code": 200,
  "msg": "æ³¨å†ŒæˆåŠŸ",
  "data": {
    "token": "jwt_token_string",
    "user": {
      "id": "user_id",
      "username": "username",
      "email": "email"
    }
  }
}
```

#### ç”¨æˆ·ç™»å½•
```http
POST /api/base/login
```

**è¯·æ±‚ä½“ï¼š**
```json
{
  "email": "string",       // é‚®ç®±
  "password": "string"     // å¯†ç 
}
```

**å“åº”ï¼š**
```json
{
  "code": 200,
  "msg": "ç™»å½•æˆåŠŸ",
  "data": {
    "token": "jwt_token_string",
    "user": {
      "id": "user_id",
      "username": "username",
      "email": "email"
    }
  }
}
```

---

### æ–‡ç« ç®¡ç†

[ğŸ” è¿”å›ç›®å½•](#ç›®å½•)

#### æœç´¢æ–‡ç« 
```http
GET /api/base/article?search_text=æœç´¢å…³é”®è¯&page_number=1&page_size=10&author=ä½œè€…å
```

**æŸ¥è¯¢å‚æ•°ï¼š**
- `search_text`ï¼ˆå¯é€‰ï¼‰ï¼šæœç´¢å…³é”®è¯ï¼Œæ”¯æŒæ¨¡ç³Šæœç´¢ï¼Œå…è®¸ç©ºæ ¼
- `page_number`ï¼ˆå¯é€‰ï¼‰ï¼šé¡µç ï¼Œä»1å¼€å§‹ï¼Œé»˜è®¤ 1
- `page_size`ï¼ˆå¯é€‰ï¼‰ï¼šæ¯é¡µå¤§å°ï¼Œé»˜è®¤ 10
- `author`ï¼ˆå¯é€‰ï¼‰ï¼šä½œè€…å
- `create_time_sort`ï¼ˆå¯é€‰ï¼‰ï¼šåˆ›å»ºæ—¶é—´æ’åºæ–¹å‘ï¼ˆ1è¡¨ç¤ºå‡åºï¼Œ-1è¡¨ç¤ºé™åºï¼‰
- `update_time_sort`ï¼ˆå¯é€‰ï¼‰ï¼šæ›´æ–°æ—¶é—´æ’åºæ–¹å‘ï¼ˆ1è¡¨ç¤ºå‡åºï¼Œ-1è¡¨ç¤ºé™åºï¼‰
- `lazy`ï¼ˆå¯é€‰ï¼‰ï¼šæ˜¯å¦æ‡’æƒ°åŠ è½½ï¼Œå¦‚æœä¸ºtrueåˆ™ä¸è¿”å›å®ä½“å†…å®¹

**å“åº”ï¼š**
```json
{
  "code": 200,
  "msg": "è·å–æˆåŠŸ",
  "data": {
    "articles": [
      {
        "id": "article_id",
        "title": "æ–‡ç« æ ‡é¢˜",
        "summary": "æ–‡ç« æ‘˜è¦",
        "cover": "å°é¢å›¾ç‰‡URL",
        "category": "åˆ†ç±»åç§°",
        "tags": ["æ ‡ç­¾1", "æ ‡ç­¾2"],
        "pv": 100,
        "praise": 10,
        "create_time": "2023-01-01T00:00:00Z",
        "update_time": "2023-01-01T00:00:00Z"
      }
    ],
    "total": 100,
    "page": 1,
    "size": 10
  }
}
```

#### è·å–æ–‡ç« è¯¦æƒ…
```http
GET /api/base/article/{id}
```

**è·¯å¾„å‚æ•°ï¼š**
- `id`ï¼šæ–‡ç« ID

**å“åº”ï¼š**
```json
{
  "code": 200,
  "msg": "è·å–æˆåŠŸ",
  "data": {
    "id": "article_id",
    "title": "æ–‡ç« æ ‡é¢˜",
    "content": "æ–‡ç« å†…å®¹ï¼ˆMarkdownæ ¼å¼ï¼‰",
    "html_content": "HTMLæ ¼å¼çš„å†…å®¹",
    "summary": "æ–‡ç« æ‘˜è¦",
    "cover": "å°é¢å›¾ç‰‡URL",
    "category": "åˆ†ç±»åç§°",
    "tags": ["æ ‡ç­¾1", "æ ‡ç­¾2"],
    "pv": 100,
    "praise": 10,
    "md_words": ["åˆ†è¯1", "åˆ†è¯2"],
    "title_words": ["æ ‡é¢˜åˆ†è¯1", "æ ‡é¢˜åˆ†è¯2"],
    "create_time": "2023-01-01T00:00:00Z",
    "update_time": "2023-01-01T00:00:00Z"
  }
}
```

#### å¢åŠ æ–‡ç« æµè§ˆé‡
```http
PUT /api/base/article/{id}/pv
```

**è·¯å¾„å‚æ•°ï¼š**
- `id`ï¼šæ–‡ç« ID

**å“åº”ï¼š**
```json
{
  "code": 200,
  "msg": "æ›´æ–°æˆåŠŸ",
  "data": {
    "pv": 101
  }
}
```

#### å¢åŠ æ–‡ç« ç‚¹èµæ•°
```http
PUT /api/base/article/{id}/praise
```

**è·¯å¾„å‚æ•°ï¼š**
- `id`ï¼šæ–‡ç« ID

**å“åº”ï¼š**
```json
{
  "code": 200,
  "msg": "ç‚¹èµæˆåŠŸ",
  "data": {
    "praise": 11
  }
}
```

#### è·å–åˆ†ç±»ä¸‹çš„æ–‡ç« 
```http
GET /api/base/article/category/{name}?page_number=1&page_size=10&create_time_sort=-1&update_time_sort=-1
```

**è·¯å¾„å‚æ•°ï¼š**
- `name`ï¼šåˆ†ç±»åç§°

**æŸ¥è¯¢å‚æ•°ï¼š**
- `page_number`ï¼ˆå¯é€‰ï¼‰ï¼šé¡µç ï¼Œä»1å¼€å§‹ï¼Œé»˜è®¤ 1
- `page_size`ï¼ˆå¯é€‰ï¼‰ï¼šæ¯é¡µå¤§å°ï¼Œé»˜è®¤ 10
- `create_time_sort`ï¼ˆå¯é€‰ï¼‰ï¼šåˆ›å»ºæ—¶é—´æ’åºæ–¹å‘ï¼ˆ1è¡¨ç¤ºå‡åºï¼Œ-1è¡¨ç¤ºé™åºï¼‰
- `update_time_sort`ï¼ˆå¯é€‰ï¼‰ï¼šæ›´æ–°æ—¶é—´æ’åºæ–¹å‘ï¼ˆ1è¡¨ç¤ºå‡åºï¼Œ-1è¡¨ç¤ºé™åºï¼‰
- `lazy`ï¼ˆå¯é€‰ï¼‰ï¼šæ˜¯å¦æ‡’æƒ°åŠ è½½ï¼Œå¦‚æœä¸ºtrueåˆ™ä¸è¿”å›å®ä½“å†…å®¹

**å“åº”ï¼š** åŒæœç´¢æ–‡ç« æ¥å£

---

### åˆ†ç±»ç®¡ç†

[ğŸ” è¿”å›ç›®å½•](#ç›®å½•)

#### è·å–æ‰€æœ‰åˆ†ç±»
```http
GET /api/base/category/all
```

**å“åº”ï¼š**
```json
{
  "code": 200,
  "msg": "è·å–æˆåŠŸ",
  "data": {
    "categories": [
      {
        "id": "category_id",
        "name": "åˆ†ç±»åç§°",
        "description": "åˆ†ç±»æè¿°",
        "article_count": 10,
        "create_time": "2023-01-01T00:00:00Z"
      }
    ]
  }
}
```

---

### å›¾åºŠç®¡ç†

#### å›¾é›†ç®¡ç†

##### åˆ›å»ºå›¾é›†
```http
POST /api/base/picbed/album
```

**è¯·æ±‚ä½“ï¼š**
```json
{
  "title": "å›¾é›†æ ‡é¢˜",           // å¿…å¡«
  "description": "å›¾é›†æè¿°",     // å¿…å¡«
  "author": "ä½œè€…åç§°"           // å¿…å¡«
}
```

##### è·å–å›¾é›†è¯¦æƒ…
```http
GET /api/base/picbed/album/{id}
```

**è·¯å¾„å‚æ•°ï¼š**
- `id`ï¼šå›¾é›†ID

##### è·å–å›¾é›†åˆ—è¡¨
```http
GET /api/base/picbed/album?page=1&size=10&sort=create_time&order=desc
```

**æŸ¥è¯¢å‚æ•°ï¼š**
- `page`ï¼ˆå¯é€‰ï¼‰ï¼šé¡µç ï¼Œé»˜è®¤ 1
- `size`ï¼ˆå¯é€‰ï¼‰ï¼šæ¯é¡µå¤§å°ï¼Œé»˜è®¤ 10
- `sort`ï¼ˆå¯é€‰ï¼‰ï¼šæ’åºå­—æ®µ
- `order`ï¼ˆå¯é€‰ï¼‰ï¼šæ’åºæ–¹å¼ï¼ˆasc/descï¼‰

##### æŒ‰æ ‡ç­¾æŸ¥è¯¢å›¾é›†
```http
GET /api/base/picbed/album/tag/{tag}?page=1&size=10
```

##### æŒ‰ä½œè€…æŸ¥è¯¢å›¾é›†
```http
GET /api/base/picbed/album/author/{author}?page=1&size=10
```

##### æœç´¢å›¾é›†
```http
GET /api/base/picbed/album/search/{keyword}?page=1&size=10
```

##### æ›´æ–°å›¾é›†ä¿¡æ¯
```http
PUT /api/base/picbed/album/{id}
```

**è¯·æ±‚ä½“ï¼š** ä½¿ç”¨ `models/po.Album` ç»“æ„ä½“ï¼ŒåŒ…å«ä»¥ä¸‹ä¸»è¦å­—æ®µï¼š
```json
{
  "title": "å›¾é›†æ ‡é¢˜",
  "description": "å›¾é›†æè¿°",
  "cover_image": "å°é¢å›¾ç‰‡ID",
  "image_refs": [
    {
      "image_id": "å›¾ç‰‡ID",
      "position": {
        "x": 0.1,
        "y": 0.2,
        "width": 0.3,
        "height": 0.4,
        "unit": "%"
      },
      "caption": "å›¾ç‰‡æ ‡é¢˜",
      "description": "å›¾ç‰‡æè¿°"
    }
  ],
  "tags": ["æ ‡ç­¾1", "æ ‡ç­¾2"],
  "author": "ä½œè€…åç§°",
  "visibility": "public"
}
```

##### åˆ é™¤å›¾é›†
```http
DELETE /api/base/picbed/album/{id}
```

#### å›¾ç‰‡ç®¡ç†

##### ä¸Šä¼ å›¾ç‰‡ï¼ˆç›´æ¥æ–‡ä»¶ä¸Šä¼ ï¼‰
```http
POST /api/base/picbed/image
```

**è¯·æ±‚ä½“ï¼š** `multipart/form-data` æ ¼å¼
```
file: å›¾ç‰‡æ–‡ä»¶                    // å¿…å¡«ï¼Œæ”¯æŒçš„æ ¼å¼ï¼šjpg, jpeg, png, gif, webp
name: å›¾ç‰‡åç§°                    // å¯é€‰ï¼Œç•™ç©ºåˆ™ä½¿ç”¨æ–‡ä»¶å
tags: æ ‡ç­¾1,æ ‡ç­¾2,æ ‡ç­¾3          // å¯é€‰ï¼Œé€—å·åˆ†éš”çš„æ ‡ç­¾
```

**å“åº”ï¼š**
```json
{
  "code": 200,
  "msg": "å›¾ç‰‡ä¸Šä¼ æˆåŠŸ",
  "data": {
    "id": "å›¾ç‰‡ID",
    "name": "å›¾ç‰‡åç§°",
    "cos_url": "è…¾è®¯äº‘COSå›¾ç‰‡åœ°å€",
    "width": 1920,
    "height": 1080,
    "size": 2048000,
    "format": "image/jpeg",
    "tags": ["æ ‡ç­¾1", "æ ‡ç­¾2"],
    "positions": {
      "nexus": {
        "category_id": "nexus",
        "position": 1,
        "x": 0,
        "y": 0
      }
    },
    "uploaded_at": "2024-01-01T00:00:00Z"
  }
}
```

**æ³¨æ„ï¼š** å›¾ç‰‡ä¼šè‡ªåŠ¨ä¸Šä¼ åˆ°è…¾è®¯äº‘COSï¼Œç›®å½•ä¸º `/somnium/primitive/`ï¼Œå¹¶è‡ªåŠ¨æ·»åŠ åˆ° "nexus" åˆ†ç±»

##### è·å–å›¾ç‰‡è¯¦æƒ…
```http
GET /api/base/picbed/image/{id}
```

##### è·å–å›¾ç‰‡åˆ—è¡¨
```http
GET /api/base/picbed/image?page=1&size=10&sort=create_time&order=desc
```

##### æŒ‰æ ‡ç­¾æŸ¥è¯¢å›¾ç‰‡
```http
GET /api/base/picbed/image/tag/{tag}?page=1&size=10
```

##### æœç´¢å›¾ç‰‡
```http
GET /api/base/picbed/image/search/{keyword}?page=1&size=10
```

##### æŸ¥è¯¢å›¾ç‰‡æ‰€åœ¨å›¾é›†
```http
GET /api/base/picbed/image/{id}/albums
```

##### åˆ é™¤å›¾ç‰‡
```http
DELETE /api/base/picbed/image/{id}
```

#### å›¾é›†å›¾ç‰‡å…³è”ç®¡ç†

##### æ·»åŠ å›¾ç‰‡åˆ°å›¾é›†
```http
PUT /api/base/picbed/album/{albumId}/image
```

**è¯·æ±‚ä½“ï¼š**
```json
{
  "image_id": "å›¾ç‰‡ID",
  "layout": "å¸ƒå±€ä¿¡æ¯",
  "description": "åœ¨å›¾é›†ä¸­çš„æè¿°"
}
```

##### æ›´æ–°å›¾ç‰‡å¸ƒå±€
```http
PUT /api/base/picbed/album/{albumId}/image/{imageId}/layout
```

**è¯·æ±‚ä½“ï¼š**
```json
{
  "layout": "æ–°å¸ƒå±€ä¿¡æ¯"
}
```

##### ä»å›¾é›†ç§»é™¤å›¾ç‰‡
```http
DELETE /api/base/picbed/album/{albumId}/image/{imageId}
```

##### ç§»åŠ¨å›¾ç‰‡åˆ°å¦ä¸€ä¸ªå›¾é›†
```http
PUT /api/base/picbed/image/move
```

**è¯·æ±‚ä½“ï¼š**
```json
{
  "image_id": "å›¾ç‰‡ID",
  "from_album_id": "åŸå›¾é›†ID",
  "to_album_id": "ç›®æ ‡å›¾é›†ID"
}
```

#### å›¾ç‰‡åˆ†ç±»ç®¡ç†

##### åˆ›å»ºåˆ†ç±»
```http
POST /api/base/picbed/category
```

**è¯·æ±‚ä½“ï¼š**
```json
{
  "name": "åˆ†ç±»åç§°",              // å¿…å¡«
  "description": "åˆ†ç±»æè¿°"        // å¯é€‰
}
```

**å“åº”ï¼š**
```json
{
  "code": 200,
  "msg": "åˆ†ç±»åˆ›å»ºæˆåŠŸ",
  "data": {
    "id": "åˆ†ç±»ID",
    "name": "åˆ†ç±»åç§°",
    "description": "åˆ†ç±»æè¿°",
    "imageCount": 0,
    "createdAt": "2024-01-01T00:00:00Z"
  }
}
```

##### è·å–æ‰€æœ‰åˆ†ç±»
```http
GET /api/base/picbed/category
```

**å“åº”ï¼š**
```json
{
  "code": 200,
  "msg": "è·å–æˆåŠŸ",
  "data": {
    "categories": [
      {
        "id": "åˆ†ç±»ID",
        "name": "åˆ†ç±»åç§°",
        "description": "åˆ†ç±»æè¿°",
        "imageCount": 10,
        "coverImage": "å°é¢å›¾ç‰‡ID",
        "createdAt": "2024-01-01T00:00:00Z"
      }
    ],
    "total": 5
  }
}
```

##### è·å–åˆ†ç±»è¯¦æƒ…
```http
GET /api/base/picbed/category/{id}
```

##### æ›´æ–°åˆ†ç±»
```http
PUT /api/base/picbed/category/{id}
```

**è¯·æ±‚ä½“ï¼š**
```json
{
  "name": "æ–°åˆ†ç±»åç§°",
  "description": "æ–°åˆ†ç±»æè¿°"
}
```

##### åˆ é™¤åˆ†ç±»
```http
DELETE /api/base/picbed/category/{id}
```

##### è·å–åˆ†ç±»ä¸­çš„å›¾ç‰‡
```http
GET /api/base/picbed/category/{id}/images?page=1&size=10&sort=position&order=asc
```

**æŸ¥è¯¢å‚æ•°ï¼š**
- `page`ï¼ˆå¯é€‰ï¼‰ï¼šé¡µç ï¼Œé»˜è®¤ 1
- `size`ï¼ˆå¯é€‰ï¼‰ï¼šæ¯é¡µå¤§å°ï¼Œé»˜è®¤ 10
- `sort`ï¼ˆå¯é€‰ï¼‰ï¼šæ’åºå­—æ®µï¼Œæ”¯æŒ position, createdAt
- `order`ï¼ˆå¯é€‰ï¼‰ï¼šæ’åºæ–¹å¼ï¼ˆasc/descï¼‰

**å“åº”ï¼š**
```json
{
  "code": 200,
  "msg": "è·å–æˆåŠŸ",
  "data": {
    "images": [
      {
        "id": "å›¾ç‰‡ID",
        "name": "å›¾ç‰‡åç§°",
        "cos_url": "è…¾è®¯äº‘COSåœ°å€",
        "width": 1920,
        "height": 1080,
        "position": {
          "category_id": "åˆ†ç±»ID",
          "position": 1,
          "x": 0,
          "y": 0
        }
      }
    ],
    "total": 20,
    "page": 1,
    "size": 10
  }
}
```

##### æ·»åŠ å›¾ç‰‡åˆ°åˆ†ç±»
```http
POST /api/base/picbed/category/{id}/images
```

**è¯·æ±‚ä½“ï¼š**
```json
{
  "imageId": "å›¾ç‰‡ID",
  "position": 1,                    // å¯é€‰ï¼Œä½ç½®åºå·
  "x": 0,                          // å¯é€‰ï¼Œxåæ ‡
  "y": 0                           // å¯é€‰ï¼Œyåæ ‡
}
```

##### ä»åˆ†ç±»ç§»é™¤å›¾ç‰‡
```http
DELETE /api/base/picbed/category/{id}/images?imageId=å›¾ç‰‡ID
```

##### æ›´æ–°å›¾ç‰‡æ’åº
```http
PUT /api/base/picbed/category/{id}/images/sort
```

**è¯·æ±‚ä½“ï¼š**
```json
{
  "imageIds": ["å›¾ç‰‡ID1", "å›¾ç‰‡ID2", "å›¾ç‰‡ID3"]
}
```

##### è®¾ç½®åˆ†ç±»å°é¢
```http
PUT /api/base/picbed/category/{id}/cover
```

**è¯·æ±‚ä½“ï¼š**
```json
{
  "coverImageId": "å°é¢å›¾ç‰‡ID"
}
```

#### æ ‡ç­¾ç®¡ç†

##### åˆ›å»ºæ ‡ç­¾
```http
POST /api/base/picbed/tag
```

**è¯·æ±‚ä½“ï¼š**
```json
{
  "name": "æ ‡ç­¾åç§°",              // å¿…å¡«
  "displayName": "æ˜¾ç¤ºåç§°",       // å¯é€‰
  "description": "æ ‡ç­¾æè¿°",       // å¯é€‰
  "color": "#FF6B6B",             // å¯é€‰ï¼Œé¢œè‰²ä»£ç 
  "category": "åˆ†ç±»"               // å¯é€‰ï¼Œæ ‡ç­¾åˆ†ç±»
}
```

**å“åº”ï¼š**
```json
{
  "code": 200,
  "msg": "æ ‡ç­¾åˆ›å»ºæˆåŠŸ",
  "data": {
    "tagId": "æ ‡ç­¾ID"
  }
}
```

##### è·å–æ‰€æœ‰æ ‡ç­¾
```http
GET /api/base/picbed/tag?category=åˆ†ç±»åç§°
```

**æŸ¥è¯¢å‚æ•°ï¼š**
- `category`ï¼ˆå¯é€‰ï¼‰ï¼šæŒ‰åˆ†ç±»ç­›é€‰

**å“åº”ï¼š**
```json
{
  "code": 200,
  "msg": "è·å–æˆåŠŸ",
  "data": {
    "tags": [
      {
        "id": "æ ‡ç­¾ID",
        "name": "æ ‡ç­¾åç§°",
        "displayName": "æ˜¾ç¤ºåç§°",
        "description": "æ ‡ç­¾æè¿°",
        "color": "#FF6B6B",
        "category": "åˆ†ç±»",
        "imageCount": 10,
        "createdAt": "2024-01-01T00:00:00Z"
      }
    ],
    "total": 15
  }
}
```

##### è·å–çƒ­é—¨æ ‡ç­¾
```http
GET /api/base/picbed/tag/popular?limit=20&category=åˆ†ç±»åç§°
```

**æŸ¥è¯¢å‚æ•°ï¼š**
- `limit`ï¼ˆå¯é€‰ï¼‰ï¼šè¿”å›æ•°é‡ï¼Œé»˜è®¤ 20
- `category`ï¼ˆå¯é€‰ï¼‰ï¼šæŒ‰åˆ†ç±»ç­›é€‰

##### æœç´¢æ ‡ç­¾
```http
GET /api/base/picbed/tag/search?keyword=æœç´¢å…³é”®è¯
```

**æŸ¥è¯¢å‚æ•°ï¼š**
- `keyword`ï¼ˆå¿…å¡«ï¼‰ï¼šæœç´¢å…³é”®è¯ï¼Œæ”¯æŒåç§°å’Œæ˜¾ç¤ºåç§°æ¨¡ç³Šæœç´¢

##### æ‰¹é‡åˆ›å»ºæ ‡ç­¾
```http
POST /api/base/picbed/tag/batch
```

**è¯·æ±‚ä½“ï¼š**
```json
{
  "tags": [
    {
      "name": "æ ‡ç­¾åç§°1",
      "displayName": "æ˜¾ç¤ºåç§°1",
      "description": "æè¿°1",
      "color": "#FF6B6B",
      "category": "åˆ†ç±»1"
    },
    {
      "name": "æ ‡ç­¾åç§°2",
      "displayName": "æ˜¾ç¤ºåç§°2",
      "description": "æè¿°2",
      "color": "#4ECDC4",
      "category": "åˆ†ç±»2"
    }
  ]
}
```

**å“åº”ï¼š**
```json
{
  "code": 200,
  "msg": "æ‰¹é‡åˆ›å»ºæ ‡ç­¾å®Œæˆ",
  "data": {
    "createdTags": ["æ ‡ç­¾ID1", "æ ‡ç­¾ID2"],
    "count": 2
  }
}
```

##### è·å–æ ‡ç­¾è¯¦æƒ…
```http
GET /api/base/picbed/tag/{id}
```

##### æ›´æ–°æ ‡ç­¾
```http
PUT /api/base/picbed/tag/{id}
```

**è¯·æ±‚ä½“ï¼š**
```json
{
  "name": "æ–°æ ‡ç­¾åç§°",
  "displayName": "æ–°æ˜¾ç¤ºåç§°",
  "description": "æ–°æè¿°",
  "color": "#æ–°é¢œè‰²",
  "category": "æ–°åˆ†ç±»"
}
```

##### åˆ é™¤æ ‡ç­¾
```http
DELETE /api/base/picbed/tag/{id}
```

##### è·å–æ ‡ç­¾ä¸­çš„å›¾ç‰‡
```http
GET /api/base/picbed/tag/{id}/images?page=1&size=20
```

**å“åº”ï¼š**
```json
{
  "code": 200,
  "msg": "è·å–æˆåŠŸ",
  "data": {
    "images": [
      {
        "id": "å›¾ç‰‡ID",
        "name": "å›¾ç‰‡åç§°",
        "cos_url": "è…¾è®¯äº‘COSåœ°å€",
        "width": 1920,
        "height": 1080
      }
    ],
    "total": 50,
    "page": 1,
    "pageSize": 20
  }
}
```

[ğŸ” è¿”å›ç›®å½•](#ç›®å½•)

---

## ğŸ”§ Admin APIï¼ˆç®¡ç†æ¥å£ï¼‰

### ç®¡ç†å‘˜ç™»å½•

**æ³¨æ„ï¼š** å½“å‰ç®¡ç†å‘˜ç™»å½•æ¥å£æœªå®ç°ï¼Œä»…è¿”å›æµ‹è¯•ä¿¡æ¯

**å“åº”ï¼š**
```json
{
  "code": 200,
  "msg": "Hello",
  "data": "Hello"
}
```

**é¢„è®¡å®ç°åçš„è¯·æ±‚ä½“ï¼š**
```json
{
  "email": "admin@example.com",    // ç®¡ç†å‘˜é‚®ç®±
  "password": "admin_password"     // ç®¡ç†å‘˜å¯†ç 
}
```

### æ–‡ç« ç®¡ç†ï¼ˆéœ€è¦JWTè®¤è¯ï¼‰

#### é€šè¿‡è¡¨å•åˆ›å»ºæ–‡ç« 
```http
POST /api/admin/article
```

**è¯·æ±‚ä½“ï¼š** `form-data` æ ¼å¼ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š
```
title: æ–‡ç« æ ‡é¢˜                    // å¿…å¡«
author: ä½œè€…åç§°                   // å¯é€‰ï¼Œç•™ç©ºåˆ™ä»ä¸Šä¸‹æ–‡è·å–
synopsis: æ–‡ç« å¤‡æ³¨/ç®€ä»‹            // å¯é€‰
tags: æ ‡ç­¾1,æ ‡ç­¾2,æ ‡ç­¾3           // å¯é€‰ï¼Œé€—å·åˆ†éš”
categories: åˆ†ç±»1,åˆ†ç±»2           // å¯é€‰ï¼Œé€—å·åˆ†éš”
draft_flag: false                 // å¯é€‰ï¼Œæ˜¯å¦ä¸ºè‰ç¨¿ï¼ˆtrue/falseï¼‰
overhead: false                   // å¯é€‰ï¼Œæ˜¯å¦ç½®é¡¶ï¼ˆtrue/falseï¼‰
pic_url: å°é¢å›¾ç‰‡é“¾æ¥             // å¯é€‰
markdown: æ–‡ç« å†…å®¹ï¼ˆMarkdownæ ¼å¼ï¼‰ // å¿…å¡«
```

#### æ›´æ–°æ–‡ç« 
```http
POST /api/admin/article/{id}
```

**è·¯å¾„å‚æ•°ï¼š**
- `id`ï¼šæ–‡ç« ID

**è¯·æ±‚ä½“ï¼š** åŒåˆ›å»ºæ–‡ç« 

#### åˆ é™¤æ–‡ç« 
```http
DELETE /api/admin/article/{id}
```

#### é€šè¿‡æ–‡ä»¶ä¸Šä¼ åˆ›å»º/æ›´æ–°æ–‡ç« 
```http
POST /api/admin/article/upload
POST /api/admin/article/upload/{id}
```

**è¯·æ±‚ä½“ï¼š** `multipart/form-data` æ ¼å¼ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š
```
file: Markdownæ–‡ä»¶                    // å¿…å¡«ï¼Œæ–‡ä»¶ä¸Šä¼ 
title: æ–‡ç« æ ‡é¢˜                       // å¿…å¡«
author: ä½œè€…åç§°                      // å¯é€‰ï¼Œç•™ç©ºåˆ™ä»ä¸Šä¸‹æ–‡è·å–
synopsis: æ–‡ç« å¤‡æ³¨/ç®€ä»‹               // å¯é€‰
tags: æ ‡ç­¾1,æ ‡ç­¾2,æ ‡ç­¾3              // å¯é€‰ï¼Œé€—å·åˆ†éš”
categories: åˆ†ç±»1,åˆ†ç±»2              // å¯é€‰ï¼Œé€—å·åˆ†éš”
draft_flag: false                    // å¯é€‰ï¼Œæ˜¯å¦ä¸ºè‰ç¨¿ï¼ˆtrue/falseï¼‰
overhead: false                      // å¯é€‰ï¼Œæ˜¯å¦ç½®é¡¶ï¼ˆtrue/falseï¼‰
pic_url: å°é¢å›¾ç‰‡é“¾æ¥                // å¯é€‰
```

### åˆ†ç±»ç®¡ç†ï¼ˆéœ€è¦JWTè®¤è¯ï¼‰

#### å½’æ¡£æ–‡ç« åˆ†ç±»
```http
POST /api/admin/category/archive
```

**æ³¨æ„ï¼š** å½“å‰æ¥å£å®ç°ä¸­æœªæ‰¾åˆ°å…·ä½“çš„è¯·æ±‚ç»“æ„ä½“å®šä¹‰ï¼Œéœ€è¦æ ¹æ®å®é™…æƒ…å†µç¡®å®šå‚æ•°æ ¼å¼

**é¢„è®¡çš„è¯·æ±‚ä½“ï¼š**
```json
{
  "category_name": "è¦å½’æ¡£çš„åˆ†ç±»åç§°"
}
```

---

## ğŸ“‹ å“åº”æ ¼å¼è¯´æ˜

### ç»Ÿä¸€å“åº”æ ¼å¼
æ‰€æœ‰ API æ¥å£éƒ½ä½¿ç”¨ä»¥ä¸‹ç»Ÿä¸€å“åº”æ ¼å¼ï¼š

```json
{
  "code": 200,        // çŠ¶æ€ç 
  "msg": "æ“ä½œæˆåŠŸ",   // æ¶ˆæ¯
  "data": {}          // æ•°æ®ï¼ˆå¯é€‰ï¼‰
}
```

### çŠ¶æ€ç è¯´æ˜
- `200`ï¼šæ“ä½œæˆåŠŸ
- `400`ï¼šè¯·æ±‚å‚æ•°é”™è¯¯
- `401`ï¼šæœªè®¤è¯æˆ–è®¤è¯å¤±è´¥
- `403`ï¼šæƒé™ä¸è¶³
- `404`ï¼šèµ„æºä¸å­˜åœ¨
- `500`ï¼šæœåŠ¡å™¨å†…éƒ¨é”™è¯¯

[ğŸ” è¿”å›ç›®å½•](#ç›®å½•)

---

## ğŸ“„ åˆ†é¡µå‚æ•°è¯´æ˜

æ”¯æŒåˆ†é¡µçš„æ¥å£ä½¿ç”¨ä»¥ä¸‹å‚æ•°ï¼š
- `page`ï¼šé¡µç ï¼Œä» 1 å¼€å§‹
- `size`ï¼šæ¯é¡µå¤§å°ï¼Œé»˜è®¤ 10
- `sort`ï¼šæ’åºå­—æ®µ
- `order`ï¼šæ’åºæ–¹å¼ï¼ˆasc/descï¼‰

åˆ†é¡µå“åº”æ ¼å¼ï¼š
```json
{
  "code": 200,
  "msg": "è·å–æˆåŠŸ",
  "data": {
    "list": [],        // æ•°æ®åˆ—è¡¨
    "total": 100,      // æ€»è®°å½•æ•°
    "page": 1,         // å½“å‰é¡µç 
    "size": 10,        // æ¯é¡µå¤§å°
    "pages": 10        // æ€»é¡µæ•°
  }
}
```

[ğŸ” è¿”å›ç›®å½•](#ç›®å½•)

---

## âŒ é”™è¯¯å¤„ç†

å½“å‘ç”Ÿé”™è¯¯æ—¶ï¼ŒAPI ä¼šè¿”å›ç›¸åº”çš„é”™è¯¯ä¿¡æ¯ï¼š

```json
{
  "code": 400,
  "msg": "é”™è¯¯æè¿°ä¿¡æ¯",
  "data": null
}
```

[ğŸ” è¿”å›ç›®å½•](#ç›®å½•)

---

## ğŸ”„ æ›´æ–°è®°å½•

- 2024.09ï¼šé‡æ„å›¾ç‰‡ç®¡ç†åŠŸèƒ½ï¼Œæ–°å¢åˆ†ç±»ç®¡ç†å’Œæ ‡ç­¾ç®¡ç†ï¼Œæ”¯æŒå›¾ç‰‡-åˆ†ç±»å€’æ’ç´¢å¼•å’Œæ ‡ç­¾åŒæ­¥
- 2024.09ï¼šæ–°å¢ç›´æ¥å›¾ç‰‡ä¸Šä¼ æ¥å£ï¼Œæ”¯æŒè…¾è®¯äº‘COSè‡ªåŠ¨ä¸Šä¼ ï¼Œæ–‡ä»¶æ ¼å¼éªŒè¯å’Œæ ‡ç­¾åŒæ­¥
- 2024.01ï¼šæ–°å¢å›¾åºŠç®¡ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬å›¾é›†å’Œå›¾ç‰‡ç®¡ç†
- 2023.12ï¼šå¢åŠ æ–‡ç« ç‚¹èµåŠŸèƒ½
- 2023.11ï¼šä¼˜åŒ–ä¸­æ–‡åˆ†è¯å’Œæœç´¢åŠŸèƒ½
- 2023.10ï¼šåˆå§‹ç‰ˆæœ¬å‘å¸ƒ

[ğŸ” è¿”å›ç›®å½•](#ç›®å½•)

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **JWT Token æœ‰æ•ˆæœŸ**ï¼šJWT token é»˜è®¤æœ‰æ•ˆæœŸä¸º 3000 ç§’ï¼ˆ50 åˆ†é’Ÿï¼‰ï¼Œéœ€è¦åœ¨è¿‡æœŸå‰é‡æ–°è·å–
2. **ä¸­æ–‡æœç´¢**ï¼šæ–‡ç« æœç´¢æ”¯æŒä¸­æ–‡åˆ†è¯ï¼Œä¼šè‡ªåŠ¨å¯¹æ ‡é¢˜å’Œå†…å®¹è¿›è¡Œåˆ†è¯å¤„ç†
3. **å›¾ç‰‡ä¸Šä¼ **ï¼š
   - ç›´æ¥ä¸Šä¼ æ¥å£ï¼šæ”¯æŒ multipart/form-data æ ¼å¼ï¼Œè‡ªåŠ¨ä¸Šä¼ åˆ°è…¾è®¯äº‘COS
   - æ‰‹åŠ¨åˆ›å»ºæ¥å£ï¼šéœ€è¦å…ˆå°†å›¾ç‰‡ä¸Šä¼ åˆ°è…¾è®¯äº‘COSï¼Œè·å–URLåå†åˆ›å»ºå›¾ç‰‡è®°å½•
   - æ‰€æœ‰æ–°å›¾ç‰‡è‡ªåŠ¨æ·»åŠ åˆ° "nexus" åˆ†ç±»
4. **åˆ†ç±»ç®¡ç†**ï¼šæ”¯æŒå›¾ç‰‡åœ¨å¤šä¸ªåˆ†ç±»ä¸­çš„ä½ç½®ç®¡ç†ï¼Œä½¿ç”¨å€’æ’ç´¢å¼•å®ç°é«˜æ•ˆæŸ¥è¯¢
5. **æ ‡ç­¾åŒæ­¥**ï¼šä¸Šä¼ å›¾ç‰‡æ—¶ä¼šè‡ªåŠ¨åŒæ­¥æ ‡ç­¾ï¼Œç»´æŠ¤æ ‡ç­¾-å›¾ç‰‡å€’æ’ç´¢å¼•
6. **è…¾è®¯äº‘COS**ï¼šå›¾ç‰‡å­˜å‚¨åœ¨ `/somnium/primitive/` ç›®å½•ä¸‹ï¼Œæ”¯æŒè‡ªåŠ¨æ–‡ä»¶æ ¼å¼éªŒè¯
7. **åˆ†ç±»å½’æ¡£**ï¼šå½’æ¡£æ“ä½œä¼šå°†åˆ†ç±»ä¸‹çš„æ‰€æœ‰æ–‡ç« è®¾ç½®ä¸ºæœªåˆ†ç±»çŠ¶æ€
8. **æƒé™æ§åˆ¶**ï¼šAdmin æ¥å£éœ€è¦ç®¡ç†å‘˜æƒé™ï¼Œæ™®é€šç”¨æˆ·æ— æ³•è®¿é—®
9. **ç®¡ç†å‘˜ç™»å½•**ï¼šå½“å‰ç®¡ç†å‘˜ç™»å½•æ¥å£æœªå®ç°ï¼Œä»…è¿”å›æµ‹è¯•æ•°æ®
10. **è¯·æ±‚æ ¼å¼**ï¼šAdminæ–‡ç« æ¥å£ä½¿ç”¨`form-data`æ ¼å¼ï¼Œä¸æ˜¯JSONæ ¼å¼
11. **å›¾é›†æ›´æ–°**ï¼šæ›´æ–°å›¾é›†æ—¶éœ€è¦æä¾›å®Œæ•´çš„`models/po.Album`ç»“æ„ä½“
12. **æ‰¹é‡æ“ä½œ**ï¼šæ ‡ç­¾æ”¯æŒæ‰¹é‡åˆ›å»ºï¼Œæé«˜æ“ä½œæ•ˆç‡

[ğŸ” è¿”å›ç›®å½•](#ç›®å½•)
